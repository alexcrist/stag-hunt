<!doctype html>
<html>
  <head>
    <title>Stag Hunt</title>
  </head>
  <body>
    <h2>yote</h2>

    <canvas id="canvas" width=800 height=800></canvas>
    <script src="/socket.io/socket.io.js"></script>

    <script>

      const ON_KEY_DOWN = "keydown";
      const ON_KEY_UP = "keyup";
      const EVENT = "event";

      const socket = io();

      socket.on(EVENT, event => {
        console.log(event);
      });

      document.addEventListener(ON_KEY_DOWN, (event) => {
        console.log("Key down:", event.key);
        socket.emit(EVENT, {
          action: ON_KEY_DOWN,
          key: event.key
        });
      });


      document.addEventListener(ON_KEY_UP, (event) => {
        console.log("Key up:", event.key);
        socket.emit(EVENT, {
          action: ON_KEY_UP,
          key: event.key
        });
      });

      const canvas = document.getElementById("canvas");
      const context = canvas.getContext("2d");
      context.fillStyle = "rgb(200, 0, 0)";
      context.fillRect(10, 10, 50, 50);

    </script>
  </body>
</html>
